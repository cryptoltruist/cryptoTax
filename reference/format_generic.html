<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><meta name="description" content="Format a generic .csv transaction history file. This
function requires one transaction per row, so will not work with
trades of two coins reported on the same row. For this you will
have to split the trade on two rows and have a single currency
column per row."><title>Format a generic transaction file — format_generic • cryptoTax</title><!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png"><link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png"><link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png"><link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png"><link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png"><link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png"><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.2.2/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.2.2/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- bootstrap-toc --><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@v1.0.1/dist/bootstrap-toc.min.js" integrity="sha256-4veVQbu7//Lk5TSmc7YV48MxtMy98e26cf5MrgZYnwo=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Format a generic transaction file — format_generic"><meta property="og:description" content="Format a generic .csv transaction history file. This
function requires one transaction per row, so will not work with
trades of two coins reported on the same row. For this you will
have to split the trade on two rows and have a single currency
column per row."><meta property="og:image" content="https://cryptoltruist.github.io/cryptoTax/logo.png"><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-primary navbar-expand-lg bg-light"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">cryptoTax</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.0.2</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="nav-item">
  <a class="nav-link" href="../index.html">
    <span class="fa fa-home"></span>
     
  </a>
</li>
<li class="nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-articles">Articles</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-articles">
    <a class="dropdown-item" href="../articles/ACB.html">Adjusted Cost Base</a>
    <a class="dropdown-item" href="../articles/references.html">Tax treatments and decisions</a>
  </div>
</li>
<li class="active nav-item">
  <a class="nav-link" href="../reference/index.html">Functions</a>
</li>
<li class="nav-item">
  <a class="nav-link" href="../news/index.html">News</a>
</li>
      </ul><form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off"></form>

      <ul class="navbar-nav"><li class="nav-item">
  <a class="external-link nav-link" href="http://github.com/cryptoltruist/cryptoTax/" aria-label="GitHub">
    <span class="fa fa-github"></span>
     
  </a>
</li>
      </ul></div>

    
  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>Format a generic transaction file</h1>
      <small class="dont-index">Source: <a href="https://github.com/cryptoltruist/cryptoTax/blob/HEAD/R/format_generic.R" class="external-link"><code>R/format_generic.R</code></a></small>
      <div class="d-none name"><code>format_generic.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>Format a generic .csv transaction history file. This
function requires one transaction per row, so will not work with
trades of two coins reported on the same row. For this you will
have to split the trade on two rows and have a single currency
column per row.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">format_generic</span><span class="op">(</span></span>
<span>  <span class="va">data</span>,</span>
<span>  date <span class="op">=</span> <span class="st">"date"</span>,</span>
<span>  currency <span class="op">=</span> <span class="st">"currency"</span>,</span>
<span>  quantity <span class="op">=</span> <span class="st">"quantity"</span>,</span>
<span>  total.price <span class="op">=</span> <span class="st">"total.price"</span>,</span>
<span>  spot.rate <span class="op">=</span> <span class="st">"spot.rate"</span>,</span>
<span>  transaction <span class="op">=</span> <span class="st">"transaction"</span>,</span>
<span>  fees <span class="op">=</span> <span class="st">"fees"</span>,</span>
<span>  description <span class="op">=</span> <span class="st">"description"</span>,</span>
<span>  comment <span class="op">=</span> <span class="st">"comment"</span>,</span>
<span>  revenue.type <span class="op">=</span> <span class="st">"revenue.type"</span>,</span>
<span>  exchange <span class="op">=</span> <span class="st">"exchange"</span>,</span>
<span>  timezone <span class="op">=</span> <span class="st">"UTC"</span>,</span>
<span>  force <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  list.prices <span class="op">=</span> <span class="cn">NULL</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>
    <dl><dt>data</dt>
<dd><p>The dataframe</p></dd>


<dt>date</dt>
<dd><p>The date column</p></dd>


<dt>currency</dt>
<dd><p>The currency column</p></dd>


<dt>quantity</dt>
<dd><p>The quantity column</p></dd>


<dt>total.price</dt>
<dd><p>The total.price column, if available</p></dd>


<dt>spot.rate</dt>
<dd><p>The spot.rate column, if available</p></dd>


<dt>transaction</dt>
<dd><p>The transaction column</p></dd>


<dt>fees</dt>
<dd><p>The fees column, if available</p></dd>


<dt>description</dt>
<dd><p>The description column, if available</p></dd>


<dt>comment</dt>
<dd><p>The comment column, if available</p></dd>


<dt>revenue.type</dt>
<dd><p>The revenue.type column, if available (content can
be one of <code>c("airdrops", "referrals", "staking", "promos", "interests", "rebates", "rewards", "forks", "mining")</code>)</p></dd>


<dt>exchange</dt>
<dd><p>The exchange column</p></dd>


<dt>timezone</dt>
<dd><p>The time zone of the transactions</p></dd>


<dt>force</dt>
<dd><p>Whether to force recreating <code>list.prices</code> even though
it already exists (e.g., if you added new coins or new dates).</p></dd>


<dt>list.prices</dt>
<dd><p>A <code>list.prices</code> object from which to fetch coin prices.</p></dd>

</dl></div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="co"># Detects correct names even with capitals</span></span></span>
<span class="r-in"><span><span class="fu">format_generic</span><span class="op">(</span><span class="va">data_generic1</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>                  date currency quantity total.price  spot.rate transaction fees</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1 2021-03-02 10:36:06      BTC 0.001240       50.99 41120.9677         buy 0.72</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2 2021-03-10 12:49:04      ETH 0.063067       50.99   808.5052         buy 0.72</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3 2021-03-15 14:12:08      ETH 0.065048      150.99  2321.2090        sell 1.75</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>           exchange rate.source</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1 generic_exchange    exchange</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2 generic_exchange    exchange</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3 generic_exchange    exchange</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># In other cases, names can be specified explicitly:</span></span></span>
<span class="r-in"><span><span class="fu">format_generic</span><span class="op">(</span></span></span>
<span class="r-in"><span>  <span class="va">data_generic2</span>,</span></span>
<span class="r-in"><span>  date <span class="op">=</span> <span class="st">"Date.Transaction"</span>,</span></span>
<span class="r-in"><span>  currency <span class="op">=</span> <span class="st">"Coin"</span>,</span></span>
<span class="r-in"><span>  quantity <span class="op">=</span> <span class="st">"Amount"</span>,</span></span>
<span class="r-in"><span>  total.price <span class="op">=</span> <span class="st">"Price"</span>,</span></span>
<span class="r-in"><span>  transaction <span class="op">=</span> <span class="st">"Type"</span>,</span></span>
<span class="r-in"><span>  fees <span class="op">=</span> <span class="st">"Fee"</span>,</span></span>
<span class="r-in"><span>  exchange <span class="op">=</span> <span class="st">"Platform"</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>                  date currency quantity total.price  spot.rate transaction fees</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1 2021-03-02 10:36:06      BTC 0.001240       50.99 41120.9677         buy 0.72</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2 2021-03-10 12:49:04      ETH 0.063067       50.99   808.5052         buy 0.72</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3 2021-03-15 14:12:08      ETH 0.065048      150.99  2321.2090        sell 1.75</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>           exchange rate.source</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1 generic_exchange    exchange</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2 generic_exchange    exchange</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3 generic_exchange    exchange</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># If total.price is missing, it will calculate it based</span></span></span>
<span class="r-in"><span><span class="co"># on the spot.rate, if available</span></span></span>
<span class="r-in"><span><span class="fu">format_generic</span><span class="op">(</span><span class="va">data_generic3</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>                  date currency quantity total.price  spot.rate transaction fees</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1 2021-03-02 10:36:06      BTC 0.001240       50.99 41120.9677         buy 0.72</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2 2021-03-10 12:49:04      ETH 0.063067       50.99   808.5052         buy 0.72</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3 2021-03-15 14:12:08      ETH 0.065048      150.99  2321.2090        sell 1.75</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>           exchange</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1 generic_exchange</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2 generic_exchange</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3 generic_exchange</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># If both total.price and spot.rate are missing, it will</span></span></span>
<span class="r-in"><span><span class="co"># scrap the spot.rate from coinmarketcap based on the coin:</span></span></span>
<span class="r-in"><span><span class="fu">format_generic</span><span class="op">(</span><span class="va">data_generic4</span><span class="op">)</span></span></span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Object 'list.prices' already exists. Reusing 'list.prices'. To force a fresh download, use argument 'force = TRUE'.</span>
<span class="r-wrn co"><span class="r-pr">#&gt;</span> <span class="warning">Warning: </span>Could not calculate spot rate. Use `force = TRUE`.</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>                  date currency quantity total.price spot.rate transaction fees</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1 2021-03-02 10:36:06      BTC 0.001240          NA        NA         buy 0.72</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2 2021-03-10 12:49:04      ETH 0.063067    146.1197  2316.896         buy 0.72</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3 2021-03-15 14:12:08      ETH 0.065048    147.9074  2273.820        sell 1.75</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>           exchange   rate.source</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1 generic_exchange coinmarketcap</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2 generic_exchange coinmarketcap</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3 generic_exchange coinmarketcap</span>
<span class="r-in"><span></span></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p></p><p>Developed by Mr. Cryptoltruist.</p>
</div>

<div class="pkgdown-footer-right">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7.</p>
</div>

    </footer></div>

  

  

  </body></html>

