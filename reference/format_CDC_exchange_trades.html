<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Format CDC exchange file (FOR TRADES ONLY) — format_CDC_exchange_trades • cryptoTax</title><!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png"><link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png"><link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png"><link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png"><link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png"><link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png"><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Format CDC exchange file (FOR TRADES ONLY) — format_CDC_exchange_trades"><meta name="description" content="Format a .csv transaction history file from the Crypto.com
exchange for later ACB processing. Only processes trades, not rewards
(see format_CDC_exchange_rewards for this)."><meta property="og:description" content="Format a .csv transaction history file from the Crypto.com
exchange for later ACB processing. Only processes trades, not rewards
(see format_CDC_exchange_rewards for this)."><meta property="og:image" content="https://cryptoltruist.github.io/cryptoTax/logo.png"></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="primary" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">cryptoTax</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.0.7</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="nav-item"><a class="nav-link" href="../index.html"><span class="fa fa-home"></span></a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles"><li><a class="dropdown-item" href="../articles/ACB.html">Adjusted Cost Base</a></li>
    <li><a class="dropdown-item" href="../articles/report.html">Full Tax Report</a></li>
    <li><a class="dropdown-item" href="../articles/references.html">Tax treatments and decisions</a></li>
  </ul></li>
<li class="active nav-item"><a class="nav-link" href="../reference/index.html">Functions</a></li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">News</a></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><a class="external-link nav-link" href="http://github.com/cryptoltruist/cryptoTax/" aria-label="GitHub"><span class="fa fa-github"></span></a></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>Format CDC exchange file (FOR TRADES ONLY)</h1>
      <small class="dont-index">Source: <a href="https://github.com/cryptoltruist/cryptoTax/blob/main/R/format_CDC_exchange_trades.R" class="external-link"><code>R/format_CDC_exchange_trades.R</code></a></small>
      <div class="d-none name"><code>format_CDC_exchange_trades.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>Format a .csv transaction history file from the Crypto.com
exchange for later ACB processing. Only processes trades, not rewards
(see <code>format_CDC_exchange_rewards</code> for this).</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">format_CDC_exchange_trades</span><span class="op">(</span><span class="va">data</span>, list.prices <span class="op">=</span> <span class="cn">NULL</span>, force <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg-data">data<a class="anchor" aria-label="anchor" href="#arg-data"></a></dt>
<dd><p>The dataframe</p></dd>


<dt id="arg-list-prices">list.prices<a class="anchor" aria-label="anchor" href="#arg-list-prices"></a></dt>
<dd><p>A <code>list.prices</code> object from which to fetch coin prices.</p></dd>


<dt id="arg-force">force<a class="anchor" aria-label="anchor" href="#arg-force"></a></dt>
<dd><p>Whether to force recreating <code>list.prices</code> even though
it already exists (e.g., if you added new coins or new dates).</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    <p>A data frame of exchange transactions, formatted for further processing.</p>
    </div>
    <div class="section level2">
    <h2 id="details">Details<a class="anchor" aria-label="anchor" href="#details"></a></h2>
    <p>Original file name of the right file from the exchange is
called "SPOT_TRADE.csv", make sure you have the right one. It can
usually be accessed with the following steps: (1) connect to the
CDC exchange. On the left menu, click on "Wallet", and choose the
"Transactions" tab. Pick your desired dates. Unfortunately, the CDC
exchange history export only supports 30 days at a time. So if you
have more than that, you will need to export each file and merge them
manually before you use this function.</p>
<p>As of the new changes to the exchange (3.0) transactions before
November 1st, 2022, one can go instead through the "Archive" button
on the left vertical menu, choose dates (max 100 days), and
download trade transactions. It will be a zip file with several
transaction files inside. Choose the "SPOT_TRADE.csv".</p>
<p>In newer versions of this transaction history file, CDC has added
three disclaimer character lines at the top of the file, which is
messing with the headers. Thus, when reading the file with
<code><a href="https://rdrr.io/r/utils/read.table.html" class="external-link">read.csv()</a></code>, add the argument <code>skip = 3</code>. You will then be able to
read the file normally.</p>
<p>Update 2024: the unzipped correct file is now named "OEX_TRADE.csv" instead
of "SPOT_TRADE.csv".</p>
<p>Also note that the USD bundle ("USD_Stable_Coin") is treated as USDC for
our purposes since it can be withdrawn as USDC and it is easier to
calculate prices with CoinMarketCap and later capital gains and so on.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="fu">format_CDC_exchange_trades</span><span class="op">(</span><span class="va">data_CDC_exchange_trades</span><span class="op">)</span></span></span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Object 'list.prices' already exists. Reusing 'list.prices'. To force a fresh download, use argument 'force = TRUE'.</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Object 'list.prices' already exists. Reusing 'list.prices'. To force a fresh download, use argument 'force = TRUE'.</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>                   date currency   quantity total.price    spot.rate transaction</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1  2021-12-24 15:34:45      CRO 13260.1300 10383.49502    0.7830613         buy</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2  2021-12-24 15:34:45      ETH     2.0932 10383.49502 4960.5842834        sell</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3  2021-12-24 15:34:45      CRO  3555.9000  2784.48778    0.7830613         buy</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4  2021-12-24 15:34:45      ETH     0.5600  2784.48778 4972.2996075        sell</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5  2021-12-24 15:34:45      CRO  1781.7400  1395.21169    0.7830613         buy</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 6  2021-12-24 15:34:45      ETH     0.2800  1395.21169 4982.8989019        sell</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 7  2021-12-24 15:34:45      CRO    26.8500    21.02520    0.7830613         buy</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 8  2021-12-24 15:34:45      ETH     0.0042    21.02520 5005.9992112        sell</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 9  2021-12-24 15:34:45      CRO    26.6700    20.88425    0.7830613         buy</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 10 2021-12-24 15:34:45      ETH     0.0042    20.88425 4972.4394399        sell</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 11 2021-12-24 15:34:45      CRO    17.7800    13.92283    0.7830613         buy</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 12 2021-12-24 15:34:45      CRO    17.7800    13.92283    0.7830613         buy</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 13 2021-12-24 15:34:45      ETH     0.0028    13.92283 4972.4394399        sell</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 14 2021-12-24 15:34:45      ETH     0.0028    13.92283 4972.4394399        sell</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>           fees description comment     exchange               rate.source</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1           NA         BUY ETH_CRO CDC.exchange             coinmarketcap</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2  41.53398371        SELL ETH_CRO CDC.exchange coinmarketcap (buy price)</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3           NA         BUY ETH_CRO CDC.exchange             coinmarketcap</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4  11.13794862        SELL ETH_CRO CDC.exchange coinmarketcap (buy price)</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5           NA         BUY ETH_CRO CDC.exchange             coinmarketcap</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 6   5.58085805        SELL ETH_CRO CDC.exchange coinmarketcap (buy price)</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 7           NA         BUY ETH_CRO CDC.exchange             coinmarketcap</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 8   0.08411163        SELL ETH_CRO CDC.exchange coinmarketcap (buy price)</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 9           NA         BUY ETH_CRO CDC.exchange             coinmarketcap</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 10  0.08353356        SELL ETH_CRO CDC.exchange coinmarketcap (buy price)</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 11          NA         BUY ETH_CRO CDC.exchange             coinmarketcap</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 12          NA         BUY ETH_CRO CDC.exchange             coinmarketcap</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 13  0.05568992        SELL ETH_CRO CDC.exchange coinmarketcap (buy price)</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 14  0.05568983        SELL ETH_CRO CDC.exchange coinmarketcap (buy price)</span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Steve Wong.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.1.</p>
</div>

    </footer></div>





  </body></html>

