<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Prepare the list of coins for prices — prepare_list_prices • cryptoTax</title><!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png"><link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png"><link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png"><link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png"><link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png"><link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png"><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Prepare the list of coins for prices — prepare_list_prices"><meta name="description" content="Prepare the list of coins for prices."><meta property="og:description" content="Prepare the list of coins for prices."><meta property="og:image" content="https://cryptoltruist.github.io/cryptoTax/logo.png"></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="primary" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">cryptoTax</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.0.7</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="nav-item"><a class="nav-link" href="../index.html"><span class="fa fa-home"></span></a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles"><li><a class="dropdown-item" href="../articles/ACB.html">Adjusted Cost Base</a></li>
    <li><a class="dropdown-item" href="../articles/report.html">Full Tax Report</a></li>
    <li><a class="dropdown-item" href="../articles/references.html">Tax treatments and decisions</a></li>
  </ul></li>
<li class="active nav-item"><a class="nav-link" href="../reference/index.html">Functions</a></li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">News</a></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><a class="external-link nav-link" href="http://github.com/cryptoltruist/cryptoTax/" aria-label="GitHub"><span class="fa fa-github"></span></a></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>Prepare the list of coins for prices</h1>
      <small class="dont-index">Source: <a href="https://github.com/cryptoltruist/cryptoTax/blob/main/R/prepare_list_prices.R" class="external-link"><code>R/prepare_list_prices.R</code></a></small>
      <div class="d-none name"><code>prepare_list_prices.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>Prepare the list of coins for prices.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">prepare_list_prices</span><span class="op">(</span></span>
<span>  <span class="va">slug</span>,</span>
<span>  <span class="va">start.date</span>,</span>
<span>  end.date <span class="op">=</span> <span class="fu">lubridate</span><span class="fu">::</span><span class="fu"><a href="https://lubridate.tidyverse.org/reference/now.html" class="external-link">now</a></span><span class="op">(</span><span class="st">"UTC"</span><span class="op">)</span>,</span>
<span>  force <span class="op">=</span> <span class="cn">FALSE</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="fu">add_popular_slugs</span><span class="op">(</span><span class="va">data</span>, slug_dictionary <span class="op">=</span> <span class="va">popular_slugs</span><span class="op">)</span></span>
<span></span>
<span><span class="va">popular_slugs</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="format">Format<a class="anchor" aria-label="anchor" href="#format"></a></h2>
    <p>An object of class <code>data.frame</code> with 31 rows and 2 columns.</p>
    </div>
    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg-slug">slug<a class="anchor" aria-label="anchor" href="#arg-slug"></a></dt>
<dd><p>Which coins to include in the list. However, because of too
many duplicated symbols, you must use the unique "slug" name of the coin.
You can obtain the correct slug using
<code><a href="https://sstoeckl.github.io/crypto2/reference/crypto_list.html" class="external-link">crypto2::crypto_list()</a></code> and then filtering for your
symbol.</p></dd>


<dt id="arg-start-date">start.date<a class="anchor" aria-label="anchor" href="#arg-start-date"></a></dt>
<dd><p>What date to start reporting prices for.</p></dd>


<dt id="arg-end-date">end.date<a class="anchor" aria-label="anchor" href="#arg-end-date"></a></dt>
<dd><p>What date to end reporting prices for.
the <code>list.prices</code> object symbol for a given coin is shared by
multiple coins (see details).</p></dd>


<dt id="arg-force">force<a class="anchor" aria-label="anchor" href="#arg-force"></a></dt>
<dd><p>Whether to force recreating <code>list.prices</code> even though
it already exists (e.g., if you added new coins or new dates).</p></dd>


<dt id="arg-data">data<a class="anchor" aria-label="anchor" href="#arg-data"></a></dt>
<dd><p>The data to which to convert the coin symbol / ticker to the
"slug" (full name of the coin).</p></dd>


<dt id="arg-slug-dictionary">slug_dictionary<a class="anchor" aria-label="anchor" href="#arg-slug-dictionary"></a></dt>
<dd><p>A table of equivalency between the coin symbol /
ticker and its slug. By default uses the provided <code>popular_slugs</code> object
with the most popular coins. This is to avoid all the duplicated coin
tickers that are returned with <code><a href="https://sstoeckl.github.io/crypto2/reference/crypto_list.html" class="external-link">crypto2::crypto_list()</a></code>.</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    <p>A data frame, with the following columns: timestamp, id, slug,
name, symbol, ref_cur, open, high, low, close, volume, market_cap,
time_open, time_close, time_high, time_low, spot.rate2, currency, date2.</p>
    </div>
    <div class="section level2">
    <h2 id="details">Details<a class="anchor" aria-label="anchor" href="#details"></a></h2>
    <p>The <a href="https://sstoeckl.github.io/crypto2/reference/crypto_history.html" class="external-link">crypto2::crypto_history</a> API is at times a bit capricious. You might
need to try a few times before it processes correctly and without
errors.</p>
<p>Sometimes, <code>list.prices</code> (through coinmarketcap) will contain symbols for
a given coin (e.g., ETH) that is actually shared by multiple coins, thus,
the necessity of the <code>remove.coins.slug</code> argument. In these cases, we can
look at the slug column of <code>list.prices</code> to identify the correct coins.
ETH for example possesses two slugs: "ethereum" (the main one) and
"the-infinite-garden" (probably not the one you want). Per default, a
number of duplicate slugs are excluded, the list of which is accessible in
the <code>slugs_to_remove</code> object. However, you can provide your own list,
should you wish to.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="va">my.coins</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"bitcoin"</span>, <span class="st">"ethereum"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">my.list.prices</span> <span class="op">&lt;-</span> <span class="fu">prepare_list_prices</span><span class="op">(</span>slug <span class="op">=</span> <span class="va">my.coins</span>, start.date <span class="op">=</span> <span class="st">"2023-01-01"</span><span class="op">)</span></span></span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Object 'list.prices' already exists. Reusing 'list.prices'. To force a fresh download, use argument 'force = TRUE'.</span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">my.list.prices</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;"># A tibble: 6 × 22</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>      id slug    name    symbol timestamp           ref_cur_id ref_cur_name</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;int&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>  <span style="color: #949494; font-style: italic;">&lt;dttm&gt;</span>              <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>      <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>       </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">1</span>     1 bitcoin Bitcoin BTC    2021-01-01 <span style="color: #949494;">23:59:59</span> 2781       USD         </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">2</span>     1 bitcoin Bitcoin BTC    2021-01-02 <span style="color: #949494;">23:59:59</span> 2781       USD         </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">3</span>     1 bitcoin Bitcoin BTC    2021-01-03 <span style="color: #949494;">23:59:59</span> 2781       USD         </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">4</span>     1 bitcoin Bitcoin BTC    2021-01-04 <span style="color: #949494;">23:59:59</span> 2781       USD         </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">5</span>     1 bitcoin Bitcoin BTC    2021-01-05 <span style="color: #949494;">23:59:59</span> 2781       USD         </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">6</span>     1 bitcoin Bitcoin BTC    2021-01-06 <span style="color: #949494;">23:59:59</span> 2781       USD         </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;"># ℹ 15 more variables: time_open &lt;dttm&gt;, time_close &lt;dttm&gt;, time_high &lt;dttm&gt;,</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;">#   time_low &lt;dttm&gt;, open &lt;dbl&gt;, high &lt;dbl&gt;, low &lt;dbl&gt;, close &lt;dbl&gt;,</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;">#   volume &lt;dbl&gt;, market_cap &lt;dbl&gt;, spot.rate_USD &lt;dbl&gt;, CAD.rate &lt;dbl&gt;,</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;">#   spot.rate2 &lt;dbl&gt;, currency &lt;chr&gt;, date2 &lt;date&gt;</span></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Steve Wong.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.1.</p>
</div>

    </footer></div>





  </body></html>

