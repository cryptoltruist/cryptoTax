---
output: 
  github_document
---

<!-- README.md is generated from README.Rmd. Please edit that file -->

```{r setup, include = FALSE}
knitr::opts_chunk$set(
  collapse = TRUE,
  comment = "#>",
  fig.path = "man/figures/README-"
)
```

# cryptoTax: Crypto taxes in R (Canada only) <img src='man/figures/logo.png' align="right" height="140" style="float:right; height:200px;" />

*Disclaimer: This is not financial advice. Use at your own risks. There are no guarantees whatsoever in relation to the use of this package. Please consult a tax professional as necessary*.

Helps calculate crypto taxes in R.

1. First, by allowing you to format .CSV files from various exchanges to one large dataframe of organized transactions.
2. Second, by allowing you to calculate your Adjusted Cost Base (ACB), ACB per share, and realized and unrealized capital gains/losses.
3. Third, by calculating revenues gained from staking, interest, airdrops, etc.
4. Fourth, by calculating superficial losses as well, if desired.

Only supports basic or simple tax scenarios (for now).

# Installation

To install, use:

``` r
remotes::install_github("cryptoltruist/cryptoTax")
```

# ACB demo

```{r}
library(cryptoTax)
data <- adjustedcostbase.ca_1
data
ACB(data, spot.rate = "price", sup.loss = FALSE)
```

# Workflow demo

```{r workflow}

# Prepare list of coins
my.coins <- c("BTC", "CRO", "ETH")

list.prices <- prepare_list_prices(coins = my.coins, start.date = "2021-01-01")

# Load data
data(shakepay)
# Format file
(formatted.shakepay <- format_shakepay(shakepay))

all.data <- merge_exchanges(formatted.shakepay)

formatted.ACB <- format_ACB(all.data)

as.data.frame(formatted.ACB)

# Get latest ACB.share for each coin (ACB)
report_overview(formatted.ACB,
  today.data = TRUE, tax.year = "2021",
  local.timezone = "America/Toronto"
)

# Get summary of realized capital gains and losses
report_summary(formatted.ACB,
  today.data = TRUE, tax.year = "2021",
  local.timezone = "America/Toronto"
)

table.revenues <- report_revenues(formatted.ACB, tax.year = "2021")
table.revenues

# Plot revenues by exchange
crypto_pie(table.revenues)

# Plot revenues by reward type
crypto_pie(table.revenues, by = "revenue.type")
```

*Disclaimer: This is not financial advice. Use at your own risks. There are no guarantees whatsoever in relation to the use of this package. Please consult a tax professional as necessary*.
